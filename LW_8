//Реалізувати набір тригерів, що реалізують такі ділові правила:
//Кількість тем може бути в діапазоні від 5 до 10.
DELIMITER $$
CREATE TRIGGER topics_5_10 BEFORE INSERT ON `topics`
FOR EACH ROW
IF (SELECT COUNT(*) FROM `topics`) > 10
THEN
 SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Кількість тем більша 10';
ELSEIF (SELECT COUNT(*) FROM `topics`) < 5
THEN
 SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT ='Кількість тем менша 5 ';
END IF;
$$
DELIMITER ;

//Новинкою може бути тільки книга видана в поточному році.
DROP TRIGGER IF EXISTS new;
DELIMITER $$
CREATE TRIGGER new BEFORE INSERT ON `extra`
FOR EACH ROW
IF YEAR(NOW()) = YEAR(NEW.date) AND NEW.is_new = 1
THEN
 SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Книга має бути новинкою';
ELSEIF NOT YEAR(NOW()) = YEAR(NEW.date) AND NEW.is_new = 2
THEN
 SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Книга НЕ має бути новинкою';
END IF;
$$
DELIMITER ;

//Книга з кількістю сторінок до 100 не може коштувати більше 10 $, до 200 - 20 $, до 300 - 30 $.
DROP TRIGGER IF EXISTS pages_price;
DELIMITER $$
CREATE TRIGGER pages_price BEFORE INSERT ON `extra`
FOR EACH ROW
IF NEW.pages < 100 AND (SELECT price FROM main WHERE NEW.code = main.code) >= 10
THEN
 SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Ціна має бути не більше 10$';
ELSEIF NEW.pages < 200 AND (SELECT price FROM main WHERE NEW.code = main.code) >= 20
THEN
 SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Ціна має бути не більше 20$';
ELSEIF NEW.pages < 300 AND (SELECT price FROM main WHERE NEW.code = main.code) >= 30
THEN
 SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Ціна має бути не більше 30$';
END IF;
$$
DELIMITER ;

//Видавництво "BHV" не випускає книги накладом меншим 5000, а видавництво Diasoft - 10000.


//Книги з однаковим кодом повинні мати однакові дані.


//При спробі видалення книги видається інформація про кількість видалених рядків. Якщо користувач не "dbo", то видалення забороняється.


//Користувач "dbo" не має права змінювати ціну книги.


//Видавництва ДМК і Еком підручники не видають.


//Видавництво не може випустити більше 10 новинок протягом одного місяця поточного року.


//Видавництво BHV не випускає книги формату 60х88 / 16.
